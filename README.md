# Prophetic Bandits

A command-line program written in C that implements various bandit algorithms to choose the best threshold to buy or sell an item that randomly changes its price.

## Requirements

- gcc
- Gnuplot
- GNU Scientific Library (GSL)

## Installation

To build the program, clone the repository to your computer and run the makefile.

```bash
git clone https://github.com/PreciousKoala/propheticBandits.git
cd propheticBandits
make
```

The binaries are located in the bin directory.

## Usage

The program comes with two binaries, ``priceGenerator`` and ``propheticBandits``.

### ``priceGenerator``

```bash
priceGenerator [options] -t [number of rounds] -n [prices per round]
```

``priceGenerator`` creates a ``.dat`` file in the ``prophetData`` directory that contains prices derived from a random distribution or model. The prices are divided into T rounds with N prices per round.

**Options**

| Flag | Use | Equation |
| ---- | --- | -------- |
| -h | Displays a help screen |
| -t <number of rounds> | Specifies the total number of rounds (default = 1000) |
| -n <prices per round> | Specifies the number of prices per round (default = 10) |
| -u | Generates the prices from a Uniform Distribution | $X \sim U(0,1)$ |
| -g | Generates the prices from a Normal Distribution | $X \sim N(0,1)$ |
| -e | Generates the prices from an Exponential Distribution | $X \sim Exp(1)$ |
| -b | Generates the prices from a Bernoulli Distribution | $X \sim Bernoulli(0.5)$ |
| -r | For any above distribution $F$, each round some gaussian noise is added to its parameter(s) $p$ | $X_{t} \sim F(p_{t-1} + \epsilon_{t})$ |
| -a <phi> | Generates prices from an Autoregressive Model of order 1 | $X_{t} = \phi \cdot X_{t-1} + \epsilon_{t}$
| -m <theta> | Generates prices from a Moving Average Model of order 1 | $X_{t} = \epsilon_{t} + \theta \cdot \epsilon_{t-1}$ |
| -s <frequency> | Generates prices from a sine wave | $\large X_{t} = 5 \cdot \sin\left(\frac{2\pi \cdot t \cdot frequency}{T \cdot N}\right) + \epsilon_{t}$ |
| -c <frequency> | Generates prices from a sine wave with a steeper curve | $\large X_{t} = 5 \cdot \sqrt[3]{\sin\left(\frac{2\pi \cdot t \cdot frequency}{T \cdot N}\right)} + \epsilon_{t}$ |

If more than one distribution is chosen, the program generates from the last one that was defined.

**Examples**

```bash
bin/priceGenerator -u
# Generates 1000*10 prices from a uniform distribution with 1000 rounds
bin/priceGenerator -er -n 200
# Generates 1000*200 prices from an exponential distribution with a randomized mean each round with 1000 rounds
bin/priceGenerator -s 3 -t 30000 -n 20
# Generates 30000*20 prices from a sine wave of frequency 3 with 30000 rounds
```

### ``propheticBandits``

```bash
propheticBandits [options] -m [integer] -t [integer] [file]
```

``propheticBandits`` takes as input the ``.dat`` file generated by ``priceGenerator`` and runs the desired bandit algorithms. Each round, the algorithm chooses a threshold, and then buys an item if the price is under the threshold, or sells an item if the price is over the threshold (and if it is already holding an item). At the end of the round, the algorithm can change the threshold.

**Options**

| Flag | Use |
| ---- | --- |
| -h | Displays a help screen |
| -t <integer> | Sets the number of thresholds to choose from (default = 10) |
| -m <integer> | Sets the number of maximum items the algorithm can hold at a time (default = 1) |
| -a | Runs all the algorithms |
| -g | Runs the Greedy algorithm |
| -e | Runs the Epsilon-Greedy algorithm |
| -s | Runs the Successive Elimination algorithm |
| -u | Runs the UCB1 algorithm |
| -U | Runs the UCB2 algorithm |
| -x | Runs the EXP3 algorithm |

**Examples**

```bash
bin/propheticBandits -uUx prophetData/file1.dat
# Runs the UCB1, UCB2 and EXP3 algorithms for file1.dat with 10 thresholds and maximum capacity of 1 item
bin/propheticBandits -a -t 4 prophetData/file2.dat
# Runs all the algorithms for file2.dat with 4 thresholds and maximum capacity of 1 item
bin/propheticBandits -ge -t 4 -m 3 prophetData/file3.dat
# Runs the greedy and epsilon-greedy algorithms for file3.dat with 4 thresholds and maximum capacity of 3 items
```
